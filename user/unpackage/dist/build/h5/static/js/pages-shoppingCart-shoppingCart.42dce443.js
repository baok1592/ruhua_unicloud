(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shoppingCart-shoppingCart"],{"081f":function(t,i,e){"use strict";e("c975"),e("a9e3"),e("b680"),e("d3b7"),e("ac1f"),e("25f0"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={name:"u-number-box",props:{value:{type:Number,default:1},bgColor:{type:String,default:"#F2F3F5"},min:{type:Number,default:0},max:{type:Number,default:99999},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},size:{type:[Number,String],default:26},color:{type:String,default:"#323233"},inputWidth:{type:[Number,String],default:80},inputHeight:{type:[Number,String],default:50},index:{type:[Number,String],default:""},disabledInput:{type:Boolean,default:!1},cursorSpacing:{type:[Number,String],default:100},longPress:{type:Boolean,default:!0},pressTime:{type:[Number,String],default:250},positiveInteger:{type:Boolean,default:!0}},watch:{value:function(t,i){this.changeFromInner||(this.inputVal=t,this.$nextTick((function(){this.changeFromInner=!1})))},inputVal:function(t,i){var e=this;if(""!=t){var n=0,a=this.$u.test.number(t);n=a&&t>=this.min&&t<=this.max?t:i,this.positiveInteger&&(t<0||-1!==String(t).indexOf("."))&&(n=i,this.$nextTick((function(){e.inputVal=i}))),this.handleChange(n,"change")}}},data:function(){return{inputVal:1,timer:null,changeFromInner:!1}},created:function(){this.inputVal=Number(this.value)},computed:{getCursorSpacing:function(){return Number(uni.upx2px(this.cursorSpacing))}},methods:{btnTouchStart:function(t){var i=this;this[t](),this.longPress&&(clearInterval(this.timer),this.timer=null,this.timer=setInterval((function(){i[t]()}),this.pressTime))},clearTimer:function(){var t=this;this.$nextTick((function(){clearInterval(t.timer),t.timer=null}))},minus:function(){this.computeVal("minus")},plus:function(){this.computeVal("plus")},calcPlus:function(t,i){var e,n,a;try{n=t.toString().split(".")[1].length}catch(s){n=0}try{a=i.toString().split(".")[1].length}catch(s){a=0}e=Math.pow(10,Math.max(n,a));var o=n>=a?n:a;return((t*e+i*e)/e).toFixed(o)},calcMinus:function(t,i){var e,n,a;try{n=t.toString().split(".")[1].length}catch(s){n=0}try{a=i.toString().split(".")[1].length}catch(s){a=0}e=Math.pow(10,Math.max(n,a));var o=n>=a?n:a;return((t*e-i*e)/e).toFixed(o)},computeVal:function(t){if(uni.hideKeyboard(),!this.disabled){var i=0;"minus"===t?i=this.calcMinus(this.inputVal,this.step):"plus"===t&&(i=this.calcPlus(this.inputVal,this.step)),i<this.min||i>this.max||(this.inputVal=i,this.handleChange(i,t))}},onBlur:function(t){var i=this,e=0,n=t.detail.value;/(^\d+$)/.test(n)&&0!=n[0]||(e=this.min),e=+n,e>this.max?e=this.max:e<this.min&&(e=this.min),this.$nextTick((function(){i.inputVal=e})),this.handleChange(e,"blur")},handleChange:function(t,i){this.disabled||(this.changeFromInner=!0,this.$emit("input",Number(t)),this.$emit(i,{value:Number(t),index:this.index}))}}};i.default=n},"28c8":function(t,i,e){"use strict";e.r(i);var n=e("9980"),a=e("403d");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("6972");var s,r=e("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"27d87cde",null,!1,n["a"],s);i["default"]=c.exports},"403d":function(t,i,e){"use strict";e.r(i);var n=e("081f"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},4226:function(t,i,e){var n=e("615b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("698ee10f",n,!0,{sourceMap:!1,shadowMode:!1})},5046:function(t,i,e){"use strict";e.r(i);var n=e("71d9"),a=e("51c8");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("afaf");var s,r=e("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"410fa4d4",null,!1,n["a"],s);i["default"]=c.exports},"51c8":function(t,i,e){"use strict";e.r(i);var n=e("f785"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"615b":function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/* 文字尺寸 */.u-numberbox[data-v-27d87cde]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-number-input[data-v-27d87cde]{position:relative;text-align:center;padding:0;margin:0 %?6?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.u-icon-plus[data-v-27d87cde],\n.u-icon-minus[data-v-27d87cde]{width:%?60?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.u-icon-plus[data-v-27d87cde]{border-radius:0 %?8?% %?8?% 0}.u-icon-minus[data-v-27d87cde]{border-radius:%?8?% 0 0 %?8?%}.u-icon-disabled[data-v-27d87cde]{color:#c8c9cc!important;background:#f7f8fa!important}.u-input-disabled[data-v-27d87cde]{color:#c8c9cc!important;background-color:#f2f3f5!important}',""]),t.exports=i},6972:function(t,i,e){"use strict";var n=e("4226"),a=e.n(n);a.a},"71d9":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uNumberBox:e("28c8").default,uLoadmore:e("9c64").default,Tabbar:e("8c60").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"page-box"},[e("v-uni-view",{staticClass:"goods-section"},t._l(t.goodsListSi,(function(i,n){return e("v-uni-view",{staticClass:"g-item"},[e("v-uni-image",{staticClass:"g-item-img",attrs:{src:i.imgUrl,mode:""}}),e("v-uni-view",{staticClass:"right"},[e("v-uni-text",{staticClass:"title clamp"},[t._v(t._s(i.goodsName))]),e("v-uni-text",{staticClass:"spec"}),e("v-uni-view",{staticClass:"price-box"},[e("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(i.price))]),""!=i.specLevelname?e("v-uni-text",{staticClass:"number"},[t._v(t._s(i.specLevel))]):t._e(),""!=i.speclsName?e("v-uni-text",{staticClass:"number"},[t._v(t._s(i.specls))]):t._e()],1),i.amount>0?e("v-uni-view",{staticClass:"price-numer"},[e("u-number-box",{attrs:{"bg-color":"#ff6d00",color:"#fff",index:n,min:t.value},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.valChange.apply(void 0,arguments)}},model:{value:i.amount,callback:function(e){t.$set(i,"amount",e)},expression:"itme.amount"}})],1):t._e()],1)],1)})),1),this.goodsListSi.length>30?e("u-loadmore",{attrs:{status:t.loadStatus[0],bgColor:"#f2f2f2"}}):t._e()],1),e("v-uni-view",{staticClass:"action-section"},[e("v-uni-view",{staticClass:"checkbox"},[t.goodsListSi?e("v-uni-view",{staticClass:"clear-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clearCart.apply(void 0,arguments)}}},[t._v("清空")]):t._e()],1),e("v-uni-view",{staticClass:"total-box"},[e("v-uni-text",{staticClass:"price"},[t._v("¥"+t._s(t.allPrices))])],1),e("v-uni-button",{staticClass:"no-border confirm-btn",attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.payBtn.apply(void 0,arguments)}}},[t._v("去结算")])],1),e("Tabbar")],1)},o=[]},9980:function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={uIcon:e("d5b0").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"u-numberbox"},[e("v-uni-view",{staticClass:"u-icon-minus",class:{"u-icon-disabled":t.disabled||t.inputVal<=t.min},style:{background:t.bgColor,height:t.inputHeight+"rpx",color:t.color},on:{touchstart:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.btnTouchStart("minus")},touchend:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.clearTimer.apply(void 0,arguments)}}},[e("u-icon",{attrs:{name:"minus",size:t.size}})],1),e("v-uni-input",{staticClass:"u-number-input",class:{"u-input-disabled":t.disabled},style:{color:t.color,fontSize:t.size+"rpx",background:t.bgColor,height:t.inputHeight+"rpx",width:t.inputWidth+"rpx"},attrs:{disabled:t.disabledInput||t.disabled,"cursor-spacing":t.getCursorSpacing,type:"number"},on:{blur:function(i){arguments[0]=i=t.$handleEvent(i),t.onBlur.apply(void 0,arguments)}},model:{value:t.inputVal,callback:function(i){t.inputVal=i},expression:"inputVal"}}),e("v-uni-view",{staticClass:"u-icon-plus",class:{"u-icon-disabled":t.disabled||t.inputVal>=t.max},style:{background:t.bgColor,height:t.inputHeight+"rpx",color:t.color},on:{touchstart:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.btnTouchStart("plus")},touchend:function(i){i.stopPropagation(),i.preventDefault(),arguments[0]=i=t.$handleEvent(i),t.clearTimer.apply(void 0,arguments)}}},[e("u-icon",{attrs:{name:"plus",size:t.size}})],1)],1)},o=[]},afaf:function(t,i,e){"use strict";var n=e("dc62"),a=e.n(n);a.a},dc62:function(t,i,e){var n=e("e5f0");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("80ac88c8",n,!0,{sourceMap:!1,shadowMode:!1})},e5f0:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/*文字颜色*/\n/* 边框颜色 */\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 页面左右间距 */\n/* 文字尺寸 */.container[data-v-410fa4d4]{width:100%}.container .page-box[data-v-410fa4d4]{width:100%}.container .page-box .goods-section[data-v-410fa4d4]{margin-top:%?16?%;background:#fff;padding-bottom:%?2?%;padding-top:%?20?%}.container .page-box .goods-section .g-item[data-v-410fa4d4]{display:-webkit-box;display:-webkit-flex;display:flex;margin:%?20?% %?30?%;height:%?160?%;border-bottom:1px solid #d9d9d9}.container .page-box .goods-section .g-item .g-item-img[data-v-410fa4d4]{-webkit-flex-shrink:0;flex-shrink:0;display:block;width:%?140?%;height:%?140?%;border-radius:%?4?%}.container .page-box .goods-section .g-item .right[data-v-410fa4d4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:%?24?%;overflow:hidden}.container .page-box .goods-section .g-item .right .title[data-v-410fa4d4]{font-size:%?30?%;color:#303133}.container .page-box .goods-section .g-item .right .clamp[data-v-410fa4d4]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;box-shadow:0 0 #000}.container .page-box .goods-section .g-item .right .spec[data-v-410fa4d4]{font-size:%?26?%;color:#909399}.container .page-box .goods-section .g-item .right .price-box[data-v-410fa4d4]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?32?%;color:#303133;padding-top:%?10?%}.container .page-box .goods-section .g-item .right .price-box .price[data-v-410fa4d4]{margin-bottom:%?4?%}.container .page-box .goods-section .g-item .right .price-box .number[data-v-410fa4d4]{font-size:%?24?%;color:#606266;margin-left:%?20?%}.container .page-box .goods-section .g-item .right .price-numer[data-v-410fa4d4]{float:right}.container .action-section[data-v-410fa4d4]{margin-bottom:%?100?%;position:fixed;left:%?30?%;bottom:%?30?%;z-index:95;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?690?%;height:%?100?%;padding:0 %?30?%;background:hsla(0,0%,100%,.9);box-shadow:0 0 %?20?% 0 rgba(0,0,0,.5);border-radius:%?16?%}.container .action-section .checkbox[data-v-410fa4d4]{height:%?52?%;position:relative}.container .action-section .checkbox uni-image[data-v-410fa4d4]{width:%?52?%;height:100%;position:relative;z-index:5}.container .action-section .clear-btn[data-v-410fa4d4]{position:absolute;left:%?26?%;top:0;z-index:4;width:%?110?%;height:%?52?%;line-height:%?52?%;padding-left:%?20?%;font-size:%?28?%;color:#fff;background:#c0c4cc;border-radius:0 50px 50px 0}.container .action-section .total-box[data-v-410fa4d4]{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;text-align:right;padding-right:%?40?%}.container .action-section .total-box .price[data-v-410fa4d4]{font-size:%?32?%;color:#303133}.container .action-section .total-box .coupon[data-v-410fa4d4]{font-size:%?24?%;color:#909399}.container .action-section .total-box .coupon uni-text[data-v-410fa4d4]{color:#303133}.container .action-section .confirm-btn[data-v-410fa4d4]{padding:0 %?38?%;margin:0;border-radius:100px;height:%?76?%;line-height:%?76?%;font-size:%?30?%;background:#fa436a;box-shadow:1px 2px 5px rgba(217,60,93,.72)}',""]),t.exports=i},f785:function(t,i,e){"use strict";e("d81d"),e("fb6a"),e("e25e"),e("ac1f"),e("1276"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n={data:function(){return{loadStatus:["loadmore","loadmore","loadmore","loadmore"],goodsListSi:[],allPrices:0,value:1,Datatime:""}},onShow:function(){this.goodsListSi=[];try{var t=uni.getStorageSync("shopingCat_key");if(t){if(this.goodsListSi=t,this.allPrices=0,this.goodsListSi.length>0){for(var i=0;i<this.goodsListSi.length;i++)this.goodsListSi[i].specidLv2?this.goodsListSi[i].specidLv2=this.goodsListSi[i].specidLv2:this.goodsListSi[i].specidLv2="",this.allPrices=this.allPrices+this.goodsListSi[i].price*this.goodsListSi[i].amount;this.goodsListSi.length>0?this.$store.state.vuex_tabbar[2].count=this.goodsListSi.length:(this.$store.state.vuex_tabbar[2].count=0,this.allPrices=0)}}else this.$store.state.vuex_tabbar[2].count=0,this.allPrices=0}catch(e){this.$store.state.vuex_tabbar[2].count=0,this.allPrices=0,console.log(e)}},computed:{priceDecimal:function(){return function(t){return t!==parseInt(t)?t.slice(-2):"00"}},priceInt:function(){return function(t){return t!==parseInt(t)?t.split(".")[0]:t}}},methods:{getShopCat:function(){},valChange:function(t){this.goodsListSi[t.index].amount=t.value,this.allPrices=0;for(var i=0;i<this.goodsListSi.length;i++)this.goodsListSi[i].specidLv2?this.goodsListSi[i].specidLv2=this.goodsListSi[i].specidLv2:this.goodsListSi[i].specidLv2="",this.allPrices=this.allPrices+this.goodsListSi[i].price*this.goodsListSi[i].amount},payBtn:function(){this.order()},order:function(){var t=this;this.getOrderTime(),this.$api.get_order_lot({data:{goodsInOrder:this.goodsListSi.map((function(i){return{id:i._id,specId:i.specId,price:i.price,amount:i.amount,specidLv2:i.specidLv2,createTime:t.Datatime}}))}}).then((function(t){if(!t.outTradeNo)throw new Error(t.msg);try{uni.removeStorageSync("shopingCat_key")}catch(i){}uni.navigateTo({url:"/pages/CreateOrder/CreateOrder?outTradeNo="+t.outTradeNo})})).catch((function(t){uni.showModal({content:t.message||"下单失败",showCancel:!1})}))},getOrderTime:function(){var t=new Date,i=t.getFullYear(),e=t.getMonth()+1,n=t.getDate(),a=(t.getDay(),t.getHours()),o=t.getMinutes(),s=t.getSeconds();this.Datatime=i+"-"+e+"-"+n+"   "+a+":"+o+":"+s},clearCart:function(){try{uni.removeStorageSync("shopingCat_key")}catch(t){}}}};i.default=n}}]);